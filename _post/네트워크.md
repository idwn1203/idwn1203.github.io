#네트워크 계층 서비스

##방식에 따른 분류
데이터그램 방식
가상회선 방식

## 정의
Source -> Destination PayLoad 운반
(내용의 변경,활용 없이)
ex) 우체국 같은 운반 서비스 수행

PayLoad-유료


	흐름제어
- 송신자가 수신자 허용할 수 있는 크기,사이즈만큼 수준 사라지고 폐기->오류
- 
---
	혼잡제어
네트워크상 너무많은 데이터 그램 졵재하는 경우 네트워크와 라우터 처리성능 저하 
너무 많이 보내지마라는 역할도 

혼잡결과
패킷손실하는경우->혼잡발생->버퍼에서 사라짐(손실)-> 재전송요구-> 오버헤드 발생

해결방안 버퍼량 미리측정
종류
backpressure 한칸씩 뒤에 보내지말라고 요청
choke packet source에 보내지말라고 요청
#지연
##네트워크 층의 주소 
-각 장치연결을 식별하기 위한 (IP계층에서 사용)
ipv4 많이씀 32bit
ipv6 바꾸면 ipv4데이터 전부사라짐 ->기관별 주소 공평하게 분배
128bit
	표기법
    
    
    
---
	서비스 품질
- 실시간 전송 서비스 -음성 비디오 멀티미디어 통신 서비스 의 응용으로 발전중 확대
- 
---
	보안
- 타인 변경,보는 것 방지 ip계층 즉 네트워크 계층에서 보안 서비스
#패킷화
source 의 네트워크층 패킷에서 페이로드의 캡슐화
Destination에서 네트워크층 패킷으로부터 페이로드의 역캡슐화

#라우팅(경로설정)
->forwarding table 생성->Forwarding(어느 interface로 갈지 찾기)
---
	패킷스위칭
오류,흐름, 혼잡 transfort계층에서 서비스 제공
네트워크층 
라우팅 경로에 대한 설정 –하나혹 동시에 두개 연결
입출력포트사이의 연결만드는 교환기
전기스위치가 입력단 전기출력단으로 연결하는 것 같은
포워딩 동시에 하는
교환기능


---
	오류제어,  
헤더 부분의 오류 데이터 전달과정 데이터그램 폐기되거나 알수없는정보 보조프로토콜 ICMP사용 해서 제어




#인터넷
##역사
초기 인터넷 	
데이터그램방식
네트워크층 간소화 모든패킷 독립적 처리 -비연결서비스




네트워크층에서 패킷화의 내용으로 올바른 것은

- 데이터그램 방식에서 포워딩의 결정은 패킷헤더의 목적지 주소값에 의해 정해진다.
- 네트워크 성능은 지연/처리량/패킷손실률로 측정할 수 있다.
- 네트워크의 부하가 네트워크 용량에 도달하면 패킷지연은 급격히 증가하고 네트워크처리량은 최소화된다.
- 초크패킷은 폐-루프 혼잡 제어 기술 중 하나이다.
- IPv4주소는 일반적으로 10진수 기반의 점 10진(dotted-decimal)표기법으로 표현된다.
- 클래스형 주소지정에서 IPv4주소 공간은 5개의 클래스로 분류된다.
- Nat은 내부통신에서는 사설주소를 사용하고 외부와의 통신에는 범용의 인터넷 주소를 사용할 수 있게 해준다.


- 네트워크층에서 패킷화의 내용으로 올바른 것은
- 비클래스형 주소지정에서 기관에 할당도리수 있는 주소는
- ICMP프로토콜은 에이전트 간청 및 광고 메시지의 운반자이다.
- IPv4데이터 그램에서,헤더 길이 필드 값이 6(16)이다. 옵션바이트를 구하여라
	- 헤더 길이를 바이트로 환산하면 6x4 =24바이트 
	- 헤더길이가 20바이트이므로 옵션은 4바이트가 된다.
- 데이터 그램의 TTL값이 될 수있는 갓 23,1
	- 0은 패킷이 전달될 수 없다는 의미
	- TTL의 길이가 8bit 이기때문에 8bit의 최대값 255 를 넘을 수 없음
- M비트가 1이고 오프셋 필드 값이 0 일때
	- M=1이라는 말은 더 많은 단편(fragment)들이 뒤따라 온다는말로 첫 번째 혹은 중간 단편이라는 것을 의미하고 오프셋 값이 0이므로 첫번째 단편이다.
- M비트가 1이고 오프셋 필드 값이 0이 아닐 때
	 - M=1이라는 말은 더 많은 단편(fragment)들이 뒤따라 온다는말로 첫 번째 혹은 중간 단편이라는 것을 의미하고 오프셋 값이 0이 아님으로 중간 단편이다.
- 패킷이 offset값이 300 이고 페이로드 크기100 바이트인 패킷이 도착하였다. 첫 번째 바이트와 마지막 바이트의 번호는 얼마인지 설명하시오
	- 첫 번째 바이트 번호는 8x300 =2400이다.
	- 마지막 바이트 번호는 2400+100-1 =2499이다.
- 45000054 00030000 2006(16진수)일때
	- 헤더의 크기 16진수2번째수 5 X4=20-옵션이 없다.
	- 첫번째 수 4 ipv4 의미
	- 패킷의 전체 길이 0054(16) =84바이트 
	- 전체길이 -헤더길이 =전송되는 데이터양 =64비트
	- 단편화 관련 플래그 필드가 0이므로 패킷 단편화되지 않음
	- TTL필드의 값이 (20)16 =32 임으로 패킷이 32개까지 라우터를 방문할 수 있다.
	- 페이로드로 전달되는 프로토콜의 번호를 찾아서 이 번호가 무엇을 의미하는 지
		- 프로토콜 필드의 값이 6이므로 이 패킷은 TCP프로토콜의 세그먼트를 전달한다.

- 패킷 스니핑
	- 패킷의 암호화로 공격을 무력화시킨다.	
- 패킷 수정
	- 데이터 무결성을 보장하는 체계를 사용한다. 
- IP 스푸핑
	- 근원지 인증 기법으로 무력화
- IPv4 메인 헤더의 어느 필드가 라우터에서부터 라우터로 변경되는지 설명하시오.
- 다음의 필드들이 한 라우터에서 다른 라우터로 갈때 변경될 수 있음 
	- HLEN: 옵션이 변경될 경우
	- Total length 단편화 되거나 혹은 옵션이 변경될 경우
	- Flags 단편화되는 경우
	- Fragmentation 단편화되는 경우
	- Time-toLive 각 라우터를 지날 때마다 1씩 감소
	- Header Checksum 헤더의 내용에 변경이 일어나면 무조건 바뀜
- 전체 길이 필드값이4500 헤더 길이의 값이 00a0 데이터 그램에 의해 전달되는 페이로드가 몇 바이트인지 설명하고 효율을 구하시오
	- 전체길이가 00A0(16)이므로 160바이트다
	- 헤더길이는 5이기 때문에 20바이트
	- 페이로드 크기는 전체 160 -20헤더 =140이 되고
	- 효율은140/160 =87.5% 가 된다

- 호스트간페이로드를 전달하는 데이터 그램의 근원지 ip주소와 목적지ip주소는 호스트들의 ip주소이다. 라우터간 라우팅 갱신패킷(routing update packet)을 전달하는 IP주소들은(패킷을 송수신하는) 라우팅 인터페이스의 IP주소이다. 라우터는 가지고 있는 인터페이스 수만큼 IP주소를 가지고 있어야한다.
- RIP 는 TCP대신 UDP를 사용하는 이유
	- RIP메시지는 대체적으로 짧은 메시지 이기 때문에 연결 설정 및 해제 단계와 같은 오버헤드를 가진 TCP서비스를 사용하는 것은 효율 적이지 않다.

- 여러개의 OSPF갱신메시지가 아닌 오직 하나의 RIP갱신메시지가 필요한가?
- RIP에서 각 라우터는 이웃 라우터와 같이 거리 벡터를 공유한다. 각 라우터는 한종류의 거리벡터를 가지고 있기 때문에 단 한번의 갱신메시지를 필요로 한다.ospf에서 는 각 라우터는 다른 라우터와함께 링크의 상태를 공유한다. 라우터는 다양한 형태의 링크 를가지고있을 수 있기 때문에 여러번의 갱신메시지를 필요로 한다.
- OSPF메시지들은 라우터들 간에 교환된다. 이는 OSPF메시지가 도착했을 때 그 메시지르 받기 위해 항상동작하는 OSPF프로세스들이 필요하다ㅡㄴ 뜻인지 설명하시오
- OSPF메시지가 언제 도착할 지를 모르고 있기; 때문에 항상 동작하는 OSPF프로세스가 필요하다. 이러한 프로세스는 네트워크 계층에서 동작하면 응용 계층에서 동작하는 것이 아니다. 이렇게 항상 동작하는 프로세스를 데몬(daemon)프로세스라 한다.


